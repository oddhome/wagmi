---
title: 'Migration Guide'
description: 'Guide for how to migrate to new versions of wagmi'
---

import Callout from 'nextra-theme-docs/callout'

# Migration Guide

If you are coming from an earlier version of `wagmi`, you will need to make sure to update the following hooks & API's listed below.

## 0.6.x Breaking changes

<Callout>
  Not ready to migrate yet? You can find the `0.5.x` docs
  [here](https://0.5.x.wagmi.sh).
</Callout>

All the breaking changes in this release are related to the introduction of [Prepare Hooks](/docs/prepare-hooks/intro). It is recommended to read the [Prepare Hooks](/docs/prepare-hooks/intro) section before migrating to 0.6.x.

### `useContractWrite`

<Callout>
  Not ready to migrate to the new `useContractWrite` yet? You can use the
  [`useDeprecatedContractWrite`
  hook](/docs/deprecated-hooks/useDeprecatedContractWrite).
</Callout>

#### Behavioral changes

If a `chainId` is passed to `useContractWrite`, it will no longer attempt to switch chain before sending the transaction. Instead, it will throw an error if the user is on the wrong chain.

> Why? Eagerly prompting to switch chain in these actions created a long-running async task that that makes [iOS App Links](/docs/prepare-hooks/intro#ios-app-link-constraints) vulnerable.

#### Configuration changes

The configuration passed to the `useContractWrite` hook now needs to be either:

- prepared with the [`usePrepareContractWrite` Prepare Hook](/docs/prepare-hooks/usePrepareContractWrite) **(new)**, or
- recklessly unprepared **(previous functionality)**

> Why? To avoid long-running asynchronous tasks in event handlers. [Read more about Prepare Hooks](/docs/prepare-hooks/intro).

**Prepared usage**

```diff
+const { config } = usePrepareContractWrite({
+ addressOrName: '0x...',
+ contractInterface: wagmiAbi,
+ functionName: 'mint',
+ args: [tokenId]
+})
const { data } = useContractWrite({
- addressOrName: '0x...',
- contractInterface: wagmiAbi,
- functionName: 'mint',
- args: [tokenId],
+ ...config
})
```

**Recklessly unprepared usage**

If you are not ready to upgrade to `usePrepareContractWrite`, it is possible to use `useContractWrite` without preparing the configuration first by passing `mode: 'recklesslyUnprepared'`.

```diff
const { data } = useContractWrite({
+ mode: 'recklesslyUnprepared',
  addressOrName: '0x...',
  contractInterface: wagmiAbi,
  functionName: 'mint',
  args: [tokenId],
})
```

#### Return value changes

**`data` now only returns `hash` & `wait`**

`data` now returns an object only consisting of `hash` & `wait`, and not the full [`TransactionResponse`](https://docs.ethers.io/v5/api/providers/types/#providers-TransactionResponse).

If you require the full `TransactionResponse`, you can use `useTransaction`:

```diff
const {
  data: {
    hash,
    wait,
-   ...transaction
  }
} = useContractWrite(...)
+const { data: transaction } = useTransaction({ hash })
```

> Why? The old implementation of `useContractWrite` created a long-running async task, causing [UX pitfalls](/docs/prepare-hooks/intro#ux-pitfalls-without-prepare-hooks) when invoked in a click handler.

**`write`/`writeAsync` arguments**

The `write`/`writeAsync` configuration object has now been altered to only accept "reckless" configuration. If one or more of these values are set, it can lead to [UX pitfalls](/docs/prepare-hooks/intro#ux-pitfalls-without-prepare-hooks).

```diff
<button
  onClick={() => {
    write({
-     args: [1],
-     overrides: { from: '0x...' }
+     recklesslySetUnpreparedArgs: [1],
+     recklesslySetUnpreparedOverrides: '0x...'
    })
  }}
>
  Send
</button>
```

**`write`/`writeAsync` can be `undefined`**

When `useContractWrite` is in "prepare mode" (used with `usePrepareContractWrite`), `write`/`writeAsync` will be `undefined` until the configuration has been prepared. Ensure that your usage reflects this.

```tsx
const { config } = usePrepareContractWrite({ ... })
const { write } = useContractWrite(config)

<button
  disabled={!write}
  onClick={() => write?.()}
>
  Send
</button>
```

### `useSendTransaction`

<Callout>
  Not ready to migrate to the new `useSendTransaction` yet? You can use the
  [`useDeprecatedSendTransaction`
  hook](/docs/deprecated-hooks/useDeprecatedSendTransaction).
</Callout>

#### Behavioral changes

If a `chainId` is passed to `useSendTransaction`, it will no longer attempt to switch chain before sending the transaction. Instead, it will throw an error if the user is on the wrong chain.

> Why? Eagerly prompting to switch chain in these actions created a long-running async task that that makes [iOS App Links](/docs/prepare-hooks/intro#ios-app-link-constraints) vulnerable.

#### Configuration changes

The configuration passed to the `useSendTransaction` hook now needs to be either:

- prepared with the [`usePrepareSendTransaction` Prepare Hook](/docs/prepare-hooks/usePrepareSendTransaction) **(new)**, or
- recklessly unprepared **(previous functionality)**

> Why? To avoid long-running asynchronous tasks in event handlers. [Read more about Prepare Hooks](/docs/prepare-hooks/intro).

**Prepared usage**

```diff
import { usePrepareSendTransaction, useSendTransaction } from 'wagmi'

+const { config } = usePrepareSendTransaction({
+  request: {
+    to: 'moxey.eth',
+    value: parseEther('1'),
+  }
+})
const { data } = useSendTransaction({
- request: {
-   to: 'moxey.eth',
-   value: parseEther('1')
- }
+ ...config
})
```

**Recklessly unprepared usage**

If you are not ready to upgrade to `usePrepareSendTransaction`, it is possible to use `useSendTransaction` without preparing the configuration first by passing `mode: 'recklesslyUnprepared'`.

```diff
import { useSendTransaction } from 'wagmi'

const { data } = useSendTransaction({
+ mode: 'recklesslyUnprepared',
  request: {
    to: 'moxey.eth',
    value: parseEther('1'),
  }
})
```

#### Return value changes

**`data` now only returns `hash` & `wait`**

`data` now returns an object only consisting of `hash` & `wait`, and not the full [`TransactionResponse`](https://docs.ethers.io/v5/api/providers/types/#providers-TransactionResponse).

If you require the full `TransactionResponse`, you can use `useTransaction`:

```diff
const {
  data: {
    hash,
    wait,
-   ...transaction
  }
} = useSendTransaction(...)
+const { data: transaction } = useTransaction({ hash })
```

> Why? The old implementation of `useSendTransaction` created a long-running async task, causing [UX pitfalls](/docs/prepare-hooks/intro#ux-pitfalls-without-prepare-hooks) when invoked in a click handler.

**`sendTransaction`/`sendTransactionAsync` arguments**

The `sendTransaction`/`sendTransactionAsync` configuration object has now been altered to only accept "reckless" configuration. If one or more of these values are set, it can lead to [UX pitfalls](/docs/prepare-hooks/intro#ux-pitfalls-without-prepare-hooks).

```diff
<button
  onClick={() => {
    sendTransaction({
-     request: {
+     recklesslySetUnpreparedRequest:
        to: 'moxey.eth',
        value: parseEther('1')
      }
    })
  }}
>
  Send
</button>
```

**`sendTransaction`/`sendTransactionAsync` can be `undefined`**

When `useSendTransaction` is in "prepare mode" (used with `usePrepareSendTransaction`), `sendTransaction`/`sendTransactionAsync` will be `undefined` until the configuration has been prepared. Ensure that your usage reflects this.

```tsx
const { config } = usePrepareSendTransaction({ ... })
const { sendTransaction } = useSendTransaction(config)

<button
  disabled={!sendTransaction}
  onClick={() => sendTransaction?.()}
>
  Send
</button>
```

### `alchemyProvider` and `infuraProvider`

`alchemyProvider` and `infuraProvider` now use a generic `apiKey` configuration option instead of `alchemyId` and `infuraId`.

```diff
import { alchemyProvider } from '@wagmi/core/providers/alchemy'
import { infuraProvider } from '@wagmi/core/providers/infura'

alchemyProvider({
-  alchemyId: 'yourAlchemyApiKey',
+  apiKey: 'yourAlchemyApiKey',
})

infuraProvider({
-  infuraId: 'yourInfuraApiKey',
+  apiKey: 'yourInfuraApiKey',
})
```

## 0.5.x Breaking changes

<Callout>
  Not ready to migrate yet? You can find the `0.4.x` docs
  [here](https://0.4.x.wagmi.sh).
</Callout>

### `WagmiConfig`

The `client` prop is now required on `WagmiConfig`.

````diff
```tsx
import {
  createClient,
+ configureChains,
+ defaultChains
} from 'wagmi'
+import { publicProvider } from 'wagmi/providers/public'

+const { provider, webSocketProvider } = configureChains(defaultChains, [
+ publicProvider(),
+])

+const client = createClient({
+ provider,
+ webSocketProvider,
+})

function App() {
  return (
    <WagmiConfig
+     client={client}
    >
      <YourRoutes />
    </WagmiConfig>
  )
}
````

### `createClient`

#### `provider` is now required

The `provider` config option is now required on `createClient`. It is recommended to pass the [`provider` given from `configureChains`](/docs/providers/configuring-chains).

```diff
import {
  createClient,
+ defaultChains,
+ configureChains
} from 'wagmi'
+import { publicProvider } from 'wagmi/providers/publicProvider'

+const { provider } = configureChains(defaultChains, [
+ publicProvider
+])

const client = createClient({
+ provider
})
```

If you previously used an ethers.js Provider, you now need to provide your `chains` on the Provider instance:

```diff
import {
  createClient,
+ defaultChains
} from 'wagmi'
import ethers from 'ethers'

const client = createClient({
- provider: getDefaultProvider()
+ provider: Object.assign(getDefaultProvider(), { chains: defaultChains })
})
```

#### `chainId` removed from `connectors`

Removed the `chainId` parameter from `connectors` function on `createClient`.

```diff
const client = createClient({
- connectors({ chainId }) {
+ connectors() {
    ...
  }
})
```

If you previously derived RPC URLs from the `chainId` on `connectors`, you can now remove that logic as `wagmi` now handles RPC URLs internally when used with `configureChains`.

```diff
import {
  chain,
+  configureChains,
  createClient
} from 'wagmi';

+import { publicProvider } from 'wagmi/providers/public'

import { CoinbaseWalletConnector } from 'wagmi/connectors/coinbaseWallet'
import { InjectedConnector } from 'wagmi/connectors/injected'
import { MetaMaskConnector } from 'wagmi/connectors/metaMask'
import { WalletConnectConnector } from 'wagmi/connectors/walletConnect'

+const { chains } = configureChains(
+  [chain.mainnet],
+  [publicProvider()]
+);

const client = createClient({
-  connectors({ chainId }) {
-    const chain = chains.find((x) => x.id === chainId) ?? defaultChain
-    const rpcUrl = chain.rpcUrls.alchemy
-      ? `${chain.rpcUrls.alchemy}/${alchemyId}`
-      : chain.rpcUrls.default
-    return [
+  connectors: [
    new MetaMaskConnector({ chains }),
    new CoinbaseWalletConnector({
      chains,
      options: {
        appName: 'wagmi',
-       chainId: chain.id,
-       jsonRpcUrl: rpcUrl,
      },
    }),
    new WalletConnectConnector({
      chains,
      options: {
        qrcode: true,
-       rpc: { [chain.id]: rpcUrl },
      },
    }),
    new InjectedConnector({
      chains,
      options: { name: 'Injected' },
    }),
  ]
-  },
})
```

### `useAccount`

#### Return value changes

**The `data` value is now `address` & `connector`**

```diff
{
- data?: {
-   address: string
-   connector: Connector
- }
+ address?: string
+ connector?: Connector
}
```

**Global connection status values have been added**

The following global connection status values have been added:

```diff
{
+ isConnecting: boolean
+ isReconnecting: boolean
+ isConnected: boolean
+ isDisconnected: boolean
+ status: 'connecting' | 'reconnecting' | 'connected' | 'disconnected'
}
```

The `useAccount` hook is now aware of any connection event in your application, so now you can use these connection status values to determine if your user is connected, disconnected or connecting to a wallet on a global scope.

**`error`, states & `refetch` values have been removed**

Since the `useAccount` hook never dealt with asynchronous data, all of these values were
redundant & unused.

```diff
{
- error?: Error
- isIdle: boolean
- isLoading: boolean
- isFetching: boolean
- isSuccess: boolean
- isError: boolean
- isFetched: boolean
- isRefetching: boolean
- refetch: (options: {
-   throwOnError: boolean
-   cancelRefetch: boolean
- }) => Promise<{
-   address: string
-   connector: Connector
- }>
- status: 'idle' | 'error' | 'loading' | 'success'
}
```

**Summary of changes**

Below is the whole diff of changes to the `useAccount` return value.

```diff
{
- data?: {
-   address: string
-   connector: Connector
- }
+ address?: string
+ connector?: Connector
- error?: Error
- isIdle: boolean
- isLoading: boolean
- isFetching: boolean
- isSuccess: boolean
- isError: boolean
- isFetched: boolean
- isRefetching: boolean
+ isConnecting: boolean
+ isReconnecting: boolean
+ isConnected: boolean
+ isDisconnected: boolean
- refetch: (options: {
-   throwOnError: boolean
-   cancelRefetch: boolean
- }) => Promise<{
-   address: string
-   connector: Connector
- }>
- status: 'idle' | 'error' | 'loading' | 'success'
+ status: 'connecting' | 'reconnecting' | 'connected' | 'disconnected'
}
```

#### Configuration changes

**`onConnect` has been added**

The `onConnect` callback is invoked when the account connects.

It provides the connected address & connector, as well as a `isReconnected` flag for if the user reconnected via `autoConnect`.

```tsx
const account = useAccount({
  onConnect({ address, connector, isReconnected }) {
    console.log('Connected')
  },
})
```

**`onDisconnect` has been added**

The `onDisconnect` callback is invoked when the account disconnected.

```tsx
const account = useAccount({
  onDisconnect() {
    console.log('Disconnected')
  },
})
```

**`suspense` has been removed**

The `useAccount` hook is a synchronous hook – so `suspense` never worked.

```diff
const account = useAccount({
-  suspense: true,
})
```

**`onError` has been removed**

The `useAccount` hook never had any error definitions – so `onError` was never invoked.

```diff
const account = useAccount({
- onError(error) {
-   console.log('Error', error)
- },
})
```

**`onSettled` has been removed**

The `useAccount` hook is a synchronous hook. `onSettled` was always invoked immediately.

```diff
const account = useAccount({
- onSettled(data) {
-   console.log('Settled', data)
- },
})
```

If you used `onSettled`, you can move the code beneath the `useAccount` hook:

```diff
const account = useAccount({
- onSettled(data) {
-   console.log('Address:', data.address)
- },
})
+ console.log('Address:', account.address)
```

**`onSuccess` has been removed**

The `useAccount` hook is a synchronous hook. `onSuccess` was always invoked immediately.

```diff
const account = useAccount({
- onSuccess(data) {
-   console.log('Success', data)
- },
})
```

If you used `onSuccess`, you can move the code beneath the `useAccount` hook:

```diff
const account = useAccount({
- onSuccess(data) {
-   console.log('Address:', data.address)
- },
})
+ console.log('Address:', account.address)
```

### `useConnect`

#### Return value changes

**Connection status flags have been moved**

The `isConnected`, `isConnecting`, `isReconnecting` & `isDisconnected` flags have been moved to the `useAccount` hook.

```diff
-import { useConnect } from 'wagmi'
+import { useAccount } from 'wagmi'

function App() {
  const {
    isConnected,
    isConnecting,
    isReConnecting,
    isDisconnected
- } = useConnect()
+ } = useAccount()
}
```

**New `connect` mutation status flags have been added**

The `isLoading`, `isSuccess` and `isError` flags have been added to `useConnect`.

These flags represent the **local** async state of `useConnect`.

**`activeConnector` has been removed**

The `activeConnector` value has been removed. You can find the active connector on `useAccount`.

```diff
-import { useConnect } from 'wagmi'
+import { useAccount } from 'wagmi'

function App() {
- const { activeConnector } = useConnect()
+ const { connector } = useAccount()
}
```

**`connector` parameter on `connect` & `connectAsync` has been removed**

The `connector` parameter on `connect` & `connectAsync` now has to be in the config object parameter shape.

```diff
import { useConnect } from 'wagmi'

function App() {
  const { connect, connectors } = useConnect()

  return (
    <button
-     onClick={() => connect(connectors[0])}
+     onClick={() => connect({ connector: connectors[0] })}
    >
      Connect
    </button>
  )
}
```

#### Configuration changes

**`onBeforeConnect` has been renamed**

The `onBeforeConnect` callback has been renamed to `onMutate`

**`onConnect` has been renamed**

The `onConnect` callback has been renamed to `onSuccess`

### `useContractRead`

The `useContractRead` hook parameters have been consolidated into a singular config parameter.

Before:

```tsx
useContractRead(
  {
    addressOrName: wagmigotchiContractAddress,
    contractInterface: wagmigotchiABI,
  },
  'love',
  { args: '0x27a69ffba1e939ddcfecc8c7e0f967b872bac65c' },
)
```

After:

```tsx
useContractRead({
  addressOrName: wagmigotchiContractAddress,
  contractInterface: wagmigotchiABI,
  functionName: 'love',
  args: '0x27a69ffba1e939ddcfecc8c7e0f967b872bac65c',
})
```

### `useContractWrite`

The `useContractWrite` hook parameters have been consolidated into a singular config parameter.

Before:

```tsx
useContractWrite(
  {
    addressOrName: mlootContractAddress,
    contractInterface: mlootABI,
  },
  'claim',
)
```

After:

```tsx
useContractWrite({
  addressOrName: mlootContractAddress,
  contractInterface: mlootABI,
  functionName: 'claim',
})
```

### `useContractEvent`

The `useContractEvent` hook parameters have been consolidated into a singular config parameter.

Before:

```tsx
useContractEvent(
  {
    addressOrName: uniContractAddress,
    contractInterface: erc20ABI,
  },
  'Transfer',
  listener,
),
```

After:

```tsx
useContractEvent({
  addressOrName: uniContractAddress,
  contractInterface: erc20ABI,
  eventName: 'Transfer',
  listener,
})
```

### `useNetwork`

The "switch network" functionality has been moved out of `useNetwork` into a new `useSwitchNetwork` hook.

The `useNetwork` hook now accepts no configuration and only returns `chain` (renamed from `activeChain`) and `chains`.

```diff
import {
  useNetwork
+ useSwitchNetwork
} from 'wagmi'

const {
- activeChain
+ chain,
  chains,
- data,
- error,
- isError,
- isIdle,
- isLoading,
- isSuccess,
- pendingChainId,
- switchNetwork,
- switchNetworkAsync,
- status,
- reset,
-} = useNetwork({
- chainId: 69,
- onError(error) {},
- onMutate(args) {},
- onSettled(data, error) {},
- onSuccess(data) {}
-})
+} = useNetwork()

+const {
+ chains,
+ data,
+ error,
+ isError,
+ isIdle,
+ isLoading,
+ isSuccess,
+ pendingChainId,
+ switchNetwork,
+ switchNetworkAsync,
+ status,
+ reset,
+} = useSwitchNetwork({
+ chainId: 69,
+ onError(error) {},
+ onMutate(args) {},
+ onSettled(data, error) {},
+ onSuccess(data) {}
+})
```

### `Connector` `getProvider`

`Connector`s `getProvider` method no longer supports the `create` config parameter. Use the `chainId` config option instead to force create a new provider.

## 0.4.x Breaking changes

<Callout>
  Not ready to migrate yet? You can find the `0.3.x` docs
  [here](https://0.3.x.wagmi.sh).
</Callout>

### `createClient`

Passing a function to `createClient` `connectors` has now been deprecated.

If you previously derived an RPC URL from the `chainId` in `connectors`, you will need to migrate to use the [`configureChains` API](/docs/providers/configuring-chains).

Before:

```tsx {15-42}
import { providers } from 'ethers'
import { Provider, chain, createClient, defaultChains } from 'wagmi'
import { CoinbaseWalletConnector } from 'wagmi/connectors/coinbaseWallet'
import { InjectedConnector } from 'wagmi/connectors/injected'
import { MetaMaskConnector } from 'wagmi/connectors/metaMask'
import { WalletConnectConnector } from 'wagmi/connectors/walletConnect'

const alchemyId = process.env.ALCHEMY_ID

const chains = defaultChains
const defaultChain = chain.mainnet

const client = createClient({
  autoConnect: true,
  connectors({ chainId }) {
    const chain = chains.find((x) => x.id === chainId) ?? defaultChain
    const rpcUrl = chain.rpcUrls.alchemy
      ? `${chain.rpcUrls.alchemy}/${alchemyId}`
      : chain.rpcUrls.default
    return [
      new MetaMaskConnector({ chains }),
      new CoinbaseWalletConnector({
        chains,
        options: {
          appName: 'wagmi',
          chainId: chain.id,
          jsonRpcUrl: rpcUrl,
        },
      }),
      new WalletConnectConnector({
        chains,
        options: {
          qrcode: true,
          rpc: { [chain.id]: rpcUrl },
        },
      }),
      new InjectedConnector({
        chains,
        options: {
          name: 'Injected',
          shimDisconnect: true,
        },
      }),
    ]
  },
})
```

After:

```tsx {20-38}
import { Provider, chain, createClient, defaultChains } from 'wagmi'

import { alchemyProvider } from 'wagmi/providers/alchemy'
import { publicProvider } from 'wagmi/providers/public'

import { CoinbaseWalletConnector } from 'wagmi/connectors/coinbaseWallet'
import { InjectedConnector } from 'wagmi/connectors/injected'
import { MetaMaskConnector } from 'wagmi/connectors/metaMask'
import { WalletConnectConnector } from 'wagmi/connectors/walletConnect'

const alchemyId = process.env.ALCHEMY_ID

const { chains } = configureChains(defaultChains, [
  alchemyProvider({ alchemyId }),
  publicProvider(),
])

const client = createClient({
  autoConnect: true,
  connectors: [
    new MetaMaskConnector({ chains }),
    new CoinbaseWalletConnector({
      chains,
      options: {
        appName: 'wagmi',
      },
    }),
    new WalletConnectConnector({
      chains,
      options: {
        qrcode: true,
      },
    }),
    new InjectedConnector({
      chains,
      options: {
        name: 'Injected',
        shimDisconnect: true,
      },
    }),
  ],
})
```

### Duplicate named exports were removed

Duplicate exports with different names and the same functionality were removed to simplify the public API. In addition, confusing exports were renamed to be more descriptive.

- `createWagmiClient` alias was removed. Use `createClient` instead.
- `useWagmiClient` alias was removed. Use `useClient` instead.
- `WagmiClient` alias was removed. Use `Client` instead.
- `createWagmiStorage` alias was removed. Use `createStorage` instead.
- `Provider` was renamed and `WagmiProvider` alias is now deprecated. Use `WagmiConfig` instead.

## 0.3.x Breaking changes

<Callout>
  Not ready to migrate yet? You can find the `0.2.x` docs
  [here](https://0.2.x.wagmi.sh).
</Callout>

### `Provider`

The `Provider` component no longer supports configuration directly as props. You will now need to create a wagmi [`Client`](/docs/client) via `createClient`, and then pass the client to `Provider`:

Before:

```tsx
import { Provider } from 'wagmi'

function App() {
  return (
    <Provider autoConnect connectors={connectors} provider={provider}>
      <YourRoutes />
    </Provider>
  )
}
```

After:

```tsx
import { Provider, createClient } from 'wagmi'

const client = createClient({
  autoConnect: true,
  connectors,
  provider,
})

function App() {
  return (
    <Provider client={client}>
      <YourRoutes />
    </Provider>
  )
}
```

### Hooks now return a singular object

All hooks in wagmi now return a single object instead of an array pair.

Before:

```tsx
const [{ data, loading, error }, disconnect] = useAccount()
```

After:

```tsx
const { data, isLoading, error } = useAccount()
```

### Declarative getters > imperative getters

Getter functions such as `getBalance`, `getBlockNumber`, `read`, etc have been removed in favor of hook parameters / `refetch`. The `refetch` function does not accept arguments/config, so you will need to restructure your components more declaratively.

Before:

```tsx
import { useBalance } from 'wagmi'

function Example() {
  const [address, setAddress] = useState<string>('')

  const [{ data }, getBalance] = useBalance({
    skip: true,
  })

  return (
    <div>
      Get balance:
      <input onChange={(e) => setAddress(e.target.value)} value={address} />
      <button onClick={() => getBalance({ addressOrName: address })}>
        fetch
      </button>
    </div>
  )
}
```

After:

```tsx
import { useContractRead } from 'wagmi'

function Example() {
  const [address, setAddress] = useState<string>('')

  const { data, refetch } = useBalance({
    addressOrName: address,
    enabled: Boolean(address),
  })

  const [value, setValue] = useState<string>('')

  return (
    <div>
      Get balance:
      <input onChange={(e) => setValue(e.target.value)} value={value} />
      <button
        onClick={() => (address === value ? refetch() : setAddress(value))}
      >
        fetch
      </button>
    </div>
  )
}
```

### `useAccount`

- Now returns a singular object, instead of an array pair
- `fetchEns` was removed in favor of keeping `useAccount` as lightweight as possible. Use [`useEnsName`](/docs/hooks/useEnsName) and [`useEnsAvatar`](/docs/hooks/useEnsAvatar) instead.
- `disconnect` was removed. Use [`useDisconnect`](/docs/hooks/useDisconnect) instead.

Before:

```tsx
const [{ data, loading, error }, disconnect] = useAccount({ fetchEns: true })
```

After:

```tsx
const { data, isLoading, error } = useAccount({ ens: true })
const { data: ensName } = useEnsName()
const { data: ensAvatar } = useEnsAvatar()
const { disconnect } = useDisconnect()
```

### `useBalance`

- Now returns a singular object, instead of an array pair
- `skip` is no longer supported. It was repurposed to `enabled`.
- `getBalance` was removed in favor of [hook parameters / `refetch`](#declarative-getters--imperative-getters).
  Before:

```tsx
const [{ data, loading, error }, getBalance] = useBalance({ skip: true })
```

After:

```tsx
const { data, isLoading, error, refetch } = useBalance({ enabled: false })
```

### `useBlockNumber`

- Now returns a singular object, instead of an array pair
- `skip` is no longer supported. It was repurposed to `enabled`.
- `getBlockNumber` was removed in favor of [hook parameters / `refetch`](#declarative-getters--imperative-getters).
  Before:

```tsx
const [{ data, loading, error }, getBlockNumber] = useBlockNumber({
  skip: true,
})
```

After:

```tsx
const { data, isLoading, error, refetch } = useBlockNumber({
  enabled: false,
})
```

### `useConnect`

- Now returns a singular object, instead of an array pair
- `connect` is no longer asynchronous. Use `connectAsync` instead.
- `data.connected` no longer exists. Use `isConnected` instead.
- `data.connectors` no longer exists. Use `connectors` instead.
- Prefer `connector` over `data.connector`
  Before:

```tsx
const [{ data, loading, error }, connect] = useConnect()
```

After:

```tsx
const { isConnected, connector, connectors, connectAsync } = useConnect()
```

### `useContractRead`

- Now returns a singular object, instead of an array pair
- `skip` is no longer supported. It was repurposed to `enabled`.
- `read` was removed in favor of [hook parameters / `refetch`](#declarative-getters--imperative-getters).
  Before:

```tsx
const [{ data, error, loading }, read] = useContractRead(
  {
    addressOrName: '0xecb504d39723b0be0e3a9aa33d646642d1051ee1',
    contractInterface: wagmigotchiABI,
  },
  'getHunger',
  { skip: true },
)
```

After:

```tsx
const { data, error, isLoading, refetch } = useContractRead(
  {
    addressOrName: '0xecb504d39723b0be0e3a9aa33d646642d1051ee1',
    contractInterface: wagmigotchiABI,
  },
  'getHunger',
  { enabled: false },
)
```

### `useContractWrite`

- Now returns a singular object, instead of an array pair
  Before:

```tsx
const [{ data, error, loading }, write] = useContractWrite(
  {
    addressOrName: '0xecb504d39723b0be0e3a9aa33d646642d1051ee1',
    contractInterface: wagmigotchiABI,
  },
  'feed',
)
```

After:

```tsx
const { data, error, isLoading, write } = useContractWrite(
  {
    addressOrName: '0xecb504d39723b0be0e3a9aa33d646642d1051ee1',
    contractInterface: wagmigotchiABI,
  },
  'feed',
)
```

### `useEnsAvatar`

- Now returns a singular object, instead of an array pair
- `skip` is no longer supported. It was repurposed to `enabled`.
- `getEnsAvatar` was removed in favor of [hook parameters / `refetch`](#declarative-getters--imperative-getters).
  Before:

```tsx
const [{ data, error, loading }, getEnsAvatar] = useEnsAvatar({
  addressOrName: 'awkweb.eth',
  skip: true,
})
```

After:

```tsx
const { data, error, isLoading, refetch } = useEnsAvatar({
  addressOrName: 'awkweb.eth',
  enabled: false,
})
```

### `useEnsLookup`

- `useEnsLookup` was renamed to `useEnsName`
- Now returns a singular object, instead of an array pair
- `skip` is no longer supported. It was repurposed to `enabled`.
- `lookupAddress` was removed in favor of [hook parameters / `refetch`](#declarative-getters--imperative-getters).
  Before:

```tsx
const [{ data, error, loading }, lookupAddress] = useEnsLookup({
  address: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',
  skip: true,
})
```

After:

```tsx
const { data, error, isLoading, refetch } = useEnsName({
  address: '0xA0Cf798816D4b9b9866b5330EEa46a18382f251e',
  enabled: false,
})
```

### `useEnsResolveName`

- `useEnsResolveName` was renamed to `useEnsAddress`
- Now returns a singular object, instead of an array pair
- `skip` is no longer supported. It was repurposed to `enabled`.
- `resolveName` was removed in favor of [hook parameters / `refetch`](#declarative-getters--imperative-getters).
  Before:

```tsx
const [{ data, error, loading }, resolveName] = useEnsResolveName({
  name: 'meagher.eth',
  skip: true,
})
```

After:

```tsx
const { data, error, loading, refetch } = useEnsAddress({
  name: 'meagher.eth',
  enabled: false,
})
```

### `useEnsResolver`

- Now returns a singular object, instead of an array pair
- `skip` is no longer supported. It was repurposed to `enabled`.
- `getEnsResolver` was removed in favor of [hook parameters / `refetch`](#declarative-getters--imperative-getters).
  Before:

```tsx
const [{ data, error, loading }, getEnsResolver] = useEnsResolver({
  name: 'awkweb.eth',
  skip: true,
})
```

After:

```tsx
const { data, error, isLoading, refetch } = useEnsResolver({
  name: 'awkweb.eth',
  enabled: false,
})
```

### `useFeeData`

- Now returns a singular object, instead of an array pair
- `skip` is no longer supported. It was repurposed to `enabled`.
- `getFeeData` was removed in favor of [hook parameters / `refetch`](#declarative-getters--imperative-getters).
  Before:

```tsx
const [{ data, error, loading }, getFeeData] = useFeeData({ skip: true })
```

After:

```tsx
const { data, error, isLoading, refetch } = useFeeData({ enabled: false })
```

### `useNetwork`

- Now returns a singular object, instead of an array pair
- `data.chain` is now `activeChain`
- `data.chains` is now `chains`
- `switchNetwork` now has sync (`switchNetwork`) and async (`switchNetworkAsync`) variants.
  Before:

```tsx
const [{ data, error, loading }, switchNetwork] = useNetwork()
```

After:

```tsx
const { activeChain, chains, data, isLoading, switchNetworkAsync } =
  useNetwork()
```

### `useSigner`

- Now returns a singular object, instead of an array pair
- `skip` is no longer supported.
- `getSigner` was removed in favor of `refetch`
  Before:

```tsx
const [{ data, error, loading }, getSigner] = useSigner()
```

After:

```tsx
const { data, error, isLoading, refetch } = useSigner()
```

### `useSignMessage`

- Now returns a singular object, instead of an array pair
- `signMessage` now has sync (`signMessage`) and async (`signMessageAsync`) variants.
  Before:

```tsx
const [{ data, error, loading }, signMessage] = useSignMessage({
  message: 'gm wagmi frens',
})
```

After:

```tsx
const { data, error, isLoading, signMessageAsync } = useSignMessage({
  message: 'gm wagmi frens',
})
```

### `useSignTypedData`

- Now returns a singular object, instead of an array pair
- `signTypedData` now has sync (`signTypedData`) and async (`signTypedDataAsync`) variants.
  Before:

```tsx
const [{ data, error, loading }, signTypedData] = useSignTypedData({
  domain,
  types,
  value,
})
```

After:

```tsx
const { data, error, isLoading, signTypedDataAsync } = useSignTypedData({
  domain,
  types,
  value,
})
```

### `useToken`

- Now returns a singular object, instead of an array pair
- `skip` is no longer supported. It was repurposed to `enabled`.
- `getToken` was removed in favor of [hook parameters / `refetch`](#declarative-getters--imperative-getters).
  Before:

```tsx
const [{ data, error, loading }, getToken] = useToken({
  address: '0x1f9840a85d5af5bf1d1762f925bdaddc4201f984',
  skip: true,
})
```

After:

```tsx
const { data, error, isLoading, refetch } = useToken({
  address: '0x1f9840a85d5af5bf1d1762f925bdaddc4201f984',
  enabled: false,
})
```

### `useTransaction`

- `useTransaction` was renamed to `useSendTransaction`
- Now returns a singular object, instead of an array pair
- `sendTransaction` now has sync (`sendTransaction`) and async (`sendTransactionAsync`) variants.
  Before:

```tsx
const [{ data, error, loading }, sendTransaction] = useTransaction({
  request: {
    to: 'awkweb.eth',
    value: parseEther('1'), // 1 ETH
  },
})
```

After:

```tsx
const { data, error, isLoading, sendTransactionAsync } = useSendTransaction({
  request: {
    to: 'awkweb.eth',
    value: parseEther('1'), // 1 ETH
  },
})
```

### `useWaitForTransaction`

- Now returns a singular object, instead of an array pair
- `skip` is no longer supported. It was repurposed to `enabled`.
- `wait` was removed in favor of [hook parameters / `refetch`](#declarative-getters--imperative-getters).
  Before:

```tsx
const [{ data, error, loading }, wait] = useWaitForTransaction({
  hash: '0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060',
  skip: true,
})
```

After:

```tsx
const { data, error, isLoading, refetch } = useWaitForTransaction({
  hash: '0x5c504ed432cb51138bcf09aa5e8a410dd4a1e204ef84bfed1be16dfba1b22060',
  enabled: false,
})
```

### `connector.getProvider`

`connector.getProvider` is now asynchronous

Before:

```tsx
const { connector } = useConnect()

const provider = connector.getProvider()
```

After:

```tsx
const { connector } = useConnect()

const provider = await connector.getProvider()
```

### `WalletLinkConnector`

The WalletLink connector was replaced with the Coinbase Wallet SDK.

Before:

```tsx
import { WalletLinkConnector } from 'wagmi/connectors/walletLink'

const connector = new WalletLinkConnector({
  options: {
    appName: 'Mirror.xyz',
    jsonRpcUrl: 'https://mainnet.infura.io/v3',
  },
})
```

After:

```tsx
import { CoinbaseWalletConnector } from 'wagmi/connectors/coinbaseWallet'

const connector = new CoinbaseWalletConnector({
  options: {
    appName: 'Mirror.xyz',
    jsonRpcUrl: 'https://mainnet.infura.io/v3',
  },
})
```
